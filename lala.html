<html>
    <head>
        <style type="text/css">
            .api-view {
                position: fixed;
                left: 0;
                top: 0;
                width: 400px;
                height: 100%;
                border: none;
                margin-right: 2em;
            }

            .output-container {
                margin-left: 410px;
            }
        </style>
    </head>
    <body>
        <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

        <script type="text/babel" data-presets="es2015,stage-2">
            let createElement = (tagName, attributes = {}) => {
                let newElement = document.createElement(tagName);

                Object.entries(attributes).forEach(([name, value]) => {
                    newElement.setAttribute(name, value);
                });

                return newElement;
            };

            let entryURL = 'https://alpha.buildup.ch/api/v1/external/entry/generic/oag2ipeeChaimiey';
            let bodyElement = document.getElementsByTagName('body')[0];
            let iframeElement = createElement('iframe', {'class': 'api-view', 'src': entryURL});
            let outputContainerElement = createElement('div', {'class': 'output-container'});

            bodyElement.appendChild(iframeElement);
            bodyElement.appendChild(outputContainerElement);

            let setOutput = (output) => {
                let preElement = document.createElement("pre");

                preElement.appendChild(document.createTextNode(output));

                outputContainerElement.appendChild(preElement);
            };

            let receiveMessage = (event) => {
                let data = JSON.parse(event.data);

                setOutput(JSON.stringify(data, undefined, 4));
            };

            window.addEventListener('message', receiveMessage, false);
        </script>
    </body>
</html>
